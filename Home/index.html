<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Home</title>
    <link rel="icon" type="image/png" href="/Blog/favicons/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/Blog/favicons/favicon.svg" />
    <link rel="shortcut icon" href="/Blog/favicons/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/Blog/favicons/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-title" content="MyLucidBlog" />
    <link rel="manifest" href="/Blog/icons/site.webmanifest" />
</head>

<body>
    <div class="boxed">
        <h1>Lucid Dreams:<br>Explore the impossible</h1>
        <img class="cover" src="../img/lucid-dream.jpg" alt="Home picture">
        <p id="description">
            Do you know you spend nearly 15% of your whole life dreaming ? It is 15% of your life where you're lying in
            your bed inconscious dreaming and sometimes you doesn't even remember your dreams. What if I tell you that
            you can live this 15% of your life in a world where everything is possible, where your only limit is your
            imagination ? If you're here you may already know <a href="articles.html?article=1">what a lucid dream
                is</a> but maybe you weren't able to manage this amazing superpower of life or you may be looking for
            advice or techniques to improve your skills ? But guess what ? You are in the right place ! On this blog, I
            will share my insights, and reflections about lucid dreams and we will learn together everything about this
            amazing thing that is lucid dreaming ! So welcome, sit comfortably and enjoy this adventure !
        </p>
        <div id="classes_selector">
            <div class="classe_selector" id="classe_selector1" onclick="classe(1)">
                <p>The lucid dreaming guide</p>
            </div>
            <div class="classe_selector" id="classe_selector2" onclick="classe(2)">
                <p>Tips and advice</p>
            </div>
            <div class="classe_selector" id="classe_selector3" onclick="classe(3)">
                <p>Reflections about Lucid dreaming</p>
            </div>
            <div class="classe_selector" id="classe_selector4" onclick="classe(4)">
                <p>Dream science</p>
            </div>
        </div>
        <span class="separate"></span>
        <div id="classes_container">
            <div id="classe1">
                <h2>The lucid dreaming guide</h2>
                <div class="articles">
                    <a href="articles.html?article=1">
                        <img src="../img/img1.jpg" alt="artistic dream picture" class="imgArticle">
                        <h3>Lorem ipsum dolor sit amet.</h3>
                    </a>
                    <a href="articles.html?article=2">
                        <img src="../img/img2.jpg" alt="artistic dream picture" class="imgArticle">
                        <h3>Lorem ipsum dolor sit amet.</h3>
                    </a>
                    <a href="articles.html?article=3">
                        <h3>Lorem ipsum dolor sit amet.</h3>
                    </a>
                </div>
            </div>
            <div id="classe2">
                <h2>Tips and advice</h2>
                <div class="articles">
                    <a href="articles.html?article=4">
                        <h3>Lorem ipsum dolor sit amet.</h3>
                    </a>
                    <a href="articles.html?article=5">
                        <h3>Lorem ipsum dolor sit amet.</h3>
                    </a>
                    <a href="articles.html?article=6">
                        <h3>Lorem ipsum dolor sit amet.</h3>
                    </a>
                </div>
            </div>
            <div id="classe3">
                <h2>Reflections about Lucid dreaming</h2>
                <div class="articles">
                    <a href="articles.html?article=7">
                        <h3>Lorem ipsum dolor sit amet.</h3>
                    </a>
                    <a href="articles.html?article=8">
                        <h3>Lorem ipsum dolor sit amet.</h3>
                    </a>
                    <a href="articles.html?article=9">
                        <h3>Lorem ipsum dolor sit amet.</h3>
                    </a>
                </div>
            </div>
            <div id="classe4">
                <h2>Dream science</h2>
                <div class="articles">
                    <a href="articles.html?article=10">
                        <h3>Lorem ipsum dolor sit amet.</h3>
                    </a>
                    <a href="articles.html?article=11">
                        <h3>Lorem ipsum dolor sit amet.</h3>
                    </a>
                    <a href="articles.html?article=12">
                        <h3>Lorem ipsum dolor sit amet.</h3>
                    </a>
                </div>
            </div>
        </div>
        <div>
            <!-- smthg else-->
        </div>
        <footer>
            <p>&copy; 2026 Blog of a lucid dreamer. All rights reserved.</p>
            <a href="/Blog/legal_notice.html" id="mentionsLégales">Mentions légales</a>
        </footer>
    </div>
    <script>
        /*
        const sel1 = document.getElementById("classe_selector1");
        const sel2 = document.getElementById("classe_selector2");
        const sel3 = document.getElementById("classe_selector3");
        const sel4 = document.getElementById("classe_selector4");

        const c1 = document.getElementById("classe1");
        const c2 = document.getElementById("classe2");
        const c3 = document.getElementById("classe3");
        const c4 = document.getElementById("classe4");

        function classe1() {
            sel1.style.borderBottom = "3px solid #114c81";
            sel2.style.borderBottom = "none";
            sel3.style.borderBottom = "none";
            sel4.style.borderBottom = "none";

            c1.style.display = "block";
            c2.style.display = "none";
            c3.style.display = "none";
            c4.style.display = "none";
            return;
        }
        function classe2() {
            sel1.style.borderBottom = "none";
            sel2.style.borderBottom = "2px solid #114c81";
            sel3.style.borderBottom = "none";
            sel4.style.borderBottom = "none";

            c1.style.display = "none";
            c2.style.display = "block";
            c3.style.display = "none";
            c4.style.display = "none";
            return;
        }
        function classe3() {
            sel1.style.borderBottom = "none";
            sel2.style.borderBottom = "none";
            sel3.style.borderBottom = "2px solid #114c81";
            sel4.style.borderBottom = "none";

            c1.style.display = "none";
            c2.style.display = "none";
            c3.style.display = "block";
            c4.style.display = "none";
            return;
        }

        function classe4() {
            sel1.style.borderBottom = "none";
            sel2.style.borderBottom = "none";
            sel3.style.borderBottom = "none";
            sel4.style.borderBottom = "2px solid #114c81";

            c1.style.display = "none";
            c2.style.display = "none";
            c3.style.display = "none";
            c4.style.display = "block";
            return;
        }

        */


        function classe(classeNumber) {
            let sel
            let c
            if (classeNumber) {
                sel = document.getElementById("classe_selector" + classeNumber)
                c = document.getElementById("classe" + classeNumber);
            } else {
                sel = document.getElementById("classe_selector1")
                c = document.getElementById("classe1");
            }

            if (!sel || !c) return;

            document.querySelectorAll("#classes_selector > *")
                .forEach(el => {
                    el.style.borderBottom = "none";
                });

            document.querySelectorAll("#classes_container > *")
                .forEach(el => {
                    el.style.display = "none";
                });

            sel.style.borderBottom = "3px solid #114c81";
            c.style.display = "block";
        }


        async function chargerTitresArticles() {
            const blocsArticles = document.querySelectorAll(".articles");

            blocsArticles.forEach(bloc => {
                const liens = bloc.querySelectorAll("a");

                liens.forEach(a => {
                    const href = a.getAttribute("href");
                    if (!href) return;

                    // Résolution fiable du paramètre article
                    let articleID;
                    try {
                        const linkUrl = new URL(href, window.location.href);
                        articleID = linkUrl.searchParams.get('article');
                    } catch (err) {
                        console.error("Erreur parsing href:", href, err);
                        return;
                    }
                    if (!articleID) return;

                    // Ajustez ce chemin selon l'emplacement réel de vos fichiers articles
                    // Si les fichiers sont dans root/articles/1.html et index.html dans home/, alors "../articles/1.html" est correct.
                    // Si les fichiers sont dans home/articles/, utilisez "articles/" + articleID + ".html"
                    const url = "../articles/" + articleID + ".html";

                    (async () => {
                        try {
                            const response = await fetch(url);
                            if (!response.ok) throw new Error("HTTP " + response.status + " " + response.statusText);

                            const html = await response.text();
                            const parser = new DOMParser();
                            const doc = parser.parseFromString(html, "text/html");

                            // Chercher le titre - fallback sur h1 ou meta og:title
                            let titre = doc.querySelector('title')?.innerText?.trim();
                            if (!titre) titre = doc.querySelector('h1')?.innerText?.trim();
                            if (!titre) titre = doc.querySelector('meta[property="og:title"]')?.content;
                            if (!titre) titre = "Titre introuvable";

                            const h3 = a.querySelector("h3");
                            if (h3) h3.innerText = titre;
                        } catch (err) {
                            console.error("Erreur chargement article", url, err);
                            const h3 = a.querySelector("h3");
                            if (h3) h3.innerText = 'no article found error';
                            h3.style.color = "red";
                        }
                    })();
                });
            });
        }

        document.querySelectorAll('.articles a[href*="articles.html?article="]').forEach(link => {

            const url = new URL(link.href, window.location.origin);
            const articleId = url.searchParams.get("article");

            if (!articleId) return;

            const progress = parseInt(localStorage.getItem("progress_" + articleId)) || 0;

            // Création barre
            const progressBar = document.createElement("div");
            progressBar.classList.add("progress-bar");

            const progressFill = document.createElement("div");
            progressFill.classList.add("progress-fill");
            progressFill.style.width = progress + "%";

            progressBar.appendChild(progressFill);

            // Positionnement
            link.style.position = "relative";
            progressBar.style.position = "absolute";
            progressBar.style.bottom = "0";
            progressBar.style.left = "0";
            progressBar.style.width = "100%";

            link.appendChild(progressBar);
        });



        chargerTitresArticles();

        const urlParams = new URLSearchParams(window.location.search);
        const classeParam = urlParams.get('classe');
        if (classeParam) {
            classe(classeParam)
        } else {
            classe()
        }


    </script>
</body>

</html>


